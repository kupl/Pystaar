![Static Badge](https://img.shields.io/badge/python-≥_3.9-blue)

# 대형 언어 모델 기반 테스트 자동 생성

본 프로젝트는 사람이 직접 테스트 코드를 만들지 않고 대형 언어 모델로 자동으로 만드는 것을 목표로 한다. 동작 패턴이 미리 정의된 대형 언어 모델에 소스 코드와 자동 생성된 질문을 입력하여 실행이 가능하면서도 타입 오류가 발생하는 테스트 코드와 정상 동작하는 테스트 코드를 반환한다.

본 프로젝트는 2가지 모듈로 이루어진다.
1. 잠재적인 타입 오류 코드 줄 식별기 (Error Finder)
2. 테스트 코드 생성기 (Test Generator)


## 로컬 설치 가이드

```sh
git clone https://github.com/Khamax4mr/llm-test-generation.git
cd llm-test-generation
pip install -r requirements.txt
```

본 프로젝트는 테스트 프레임워크 pytest를 사용하는 것을 구현하여 파이썬 3.9버전 이상을 요구한다.


## 실행 방법

```sh
python3 run.py -s [소스 코드 경로, ..] ..
```

#### 필수 옵션
* **-s [경로1, 경로2, ..]** - 소스 코드 경로 리스트. **경로1**은 테스트를 만들고 싶은 주요 소스 코드 경로를, 나머지는 테스트 생성에 참고하는 관련 소스 코드 경로를 입력.

#### 선택 옵션
* **-r [정보1, 정보2, ..]** - 사용자 정의 추가 정보 리스트. `<제목>:<내용>` 형식.
* **-f [함수1, 함수2, ..]** - 함수 이름 리스트. 입력한 함수에 대한 테스트 생성 결과만 반환. 아무 함수도 입력하지 않으면 모든 함수에 대한 테스트 생성 결과만 반환.
* **-n [자연수]** - 타입 오류가 발생하는 테스트 개수.
* **-i [자연수]** - 테스트 생성 시 재수행 제한 횟수.
* **-m [모델명]** - LLM 모델 이름. ('response')
* **-fw [프레임워크명]** - 테스트 프레임워크 이름. ('pytest')
* **-ec [경로]** - 잠재적인 타입 오류 코드 줄 식별기 환경 설정 경로.
* **-nc [경로]** - Negative 테스트 생성기 환경 설정 경로.
* **-pc [경로]** - Positive 테스트 생성기 환경 설정 경로.
* **-fc [경로]** - 테스트 프레임워크 환경 설정 경로.
* **-o [경로]** - 결과 출력 경로.

## 잠재적인 타입 오류 코드 줄 식별

```sh
python3 -m tools.errorline_finder.run -s [소스 코드 경로, ..] ..
```

#### 필수 옵션
* **-s [경로]** - 소스 코드 경로.
#### 선택 옵션
* **-f [함수1, 함수2, ..]** - 함수 이름 리스트. 입력한 함수에 대한 테스트 생성 결과만 반환. 아무 함수도 입력하지 않으면 모든 함수에 대한 테스트 생성 결과만 반환.
* **-i [자연수]** - 오류 식별 시 재수행 제한 횟수.
* **-m [모델명]** - LLM 모델 이름. ('response')
* **-c [경로]** - 잠재적인 타입 오류 코드 줄 식별기 환경 설정 경로.
* **-o [경로]** - 결과 출력 경로.


## 테스트 생성

```sh
python3 -m tools.test_generator.run -s [소스 코드 경로, ..] ..
```

#### 필수 옵션
* **-s [경로1, 경로2, ..]** - 소스 코드 경로 리스트. **경로1**은 테스트를 만들고 싶은 주요 소스 코드 경로를, 나머지는 테스트 생성에 참고하는 관련 소스 코드 경로를 입력.
* **-e [경로]** - 이전 단계에서 반환한 오류 줄 리스트 경로.

#### 선택 옵션
* **-r [정보1, 정보2, ..]** - 사용자 정의 추가 정보 리스트. `<제목>:<내용>` 형식.
* **-i [자연수]** - 테스트 생성 시 재수행 제한 횟수.
* **-g [자연수]** - 테스트 번호.
* **-n [자연수]** - 타입 오류가 발생하는 테스트 개수.
* **-m [모델명]** - LLM 모델 이름. ('response')
* **-fw [프레임워크명]** - 테스트 프레임워크 이름. ('pytest')
* **-ec [경로]** - 잠재적인 타입 오류 코드 줄 식별기 환경 설정 경로.
* **-nc [경로]** - Negative 테스트 생성기 환경 설정 경로.
* **-pc [경로]** - Positive 테스트 생성기 환경 설정 경로.
* **-fc [경로]** - 테스트 프레임워크 환경 설정 경로.
* **-o [경로]** - 결과 출력 경로.